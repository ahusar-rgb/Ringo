<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1694334778420-1" author="aleksandr (generated)">
        <addColumn tableName="ticket_type">
            <column name="max_tickets" type="INT"/>
            <column name="people_count" type="INT"/>
            <column name="sales_stop_time" type="DATETIME"/>
        </addColumn>
    </changeSet>
    <changeSet id="1694334778420-4" author="aleksandr (generated)">
        <addColumn tableName="ticket">
            <column name="ticket_type_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet id="1694334778420-5" author="aleksandr (generated)">
        <addNotNullConstraint columnName="ticket_type_id" tableName="ticket"/>
    </changeSet>
    <changeSet id="1694334778420-6" author="aleksandr (generated)">
        <addForeignKeyConstraint baseColumnNames="ticket_type_id" baseTableName="ticket"
                                 constraintName="FK_TICKET_ON_TICKET_TYPE" referencedColumnNames="id"
                                 referencedTableName="ticket_type"/>
    </changeSet>
    <changeSet id="1694334778420-7" author="aleksandr (generated)">
        <dropColumn columnName="capacity" tableName="event"/>
    </changeSet>
    <changeSet id="1694334778420-8" author="aleksandr (generated)">
        <dropColumn columnName="is_available" tableName="ticket_type"/>
    </changeSet>

</databaseChangeLog>